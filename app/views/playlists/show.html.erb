<!-- app/views/playlists/show.html.erb -->
<h1>Playing Video</h1>
<button id="close-window-button">Close Window</button>
<h2><%= @channel_name %></h2>

<video id="video-player" controls width="100%" height="100%">
  <source src="<%= @url %>" type="application/x-mpegURL">
  Your browser does not support the video tag.
</video>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const video = document.getElementById('video-player');
    const closeButton = document.getElementById('close-window-button');

    if (video) {
      // Wait for 5 seconds (5000 milliseconds) and then unmute the video
      setTimeout(() => {
        video.play();
      video.muted = false; //
      }, 10000);
    } else {
      console.error('Video element not found');
    }

    // Add event listener to the close button to close the window
    closeButton.addEventListener('click', function() {
      window.close();
    });
  });
</script>
